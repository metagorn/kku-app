
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Classroom API Documentation</title>
  <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui.css" />
  <style>
    html {
      box-sizing: border-box;
      overflow: -moz-scrollbars-vertical;
      overflow-y: scroll;
    }
    *, *:before, *:after {
      box-sizing: inherit;
    }
    body {
      margin:0;
      background: #fafafa;
    }
    .swagger-ui .topbar {
      background-color: #2c3e50;
    }
    .swagger-ui .topbar .download-url-wrapper {
      display: none;
    }
    .swagger-ui .info .title {
      color: #2c3e50;
    }
  </style>
</head>
<body>
  <div id="swagger-ui"></div>
  <script src="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui-bundle.js"></script>
  <script src="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui-standalone-preset.js"></script>
  <script>
    window.onload = function() {
      // OpenAPI specification embedded directly
      const spec = {"openapi":"3.0.0","info":{"title":"Classroom API","description":"API for managing classroom data including companies, schools, and user profiles","version":"1.0.0","contact":{"name":"API Support","email":"support@example.com"}},"servers":[{"url":"http://localhost:3000/api/classroom","description":"Development server"},{"url":"https://cis.kku.ac.th/api/classroom","description":"Production server"}],"security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"paths":{"/signin":{"post":{"tags":["Authentication"],"summary":"User sign in","description":"Authenticate user with email and password, returns JWT token","security":[{"ApiKeyAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInRequest"},"example":{"email":"user@example.com","password":"password123"}}}},"responses":{"200":{"description":"Sign in successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInResponse"},"example":{"data":{"_id":"64a1b2c3d4e5f6789012345","firstname":"John","lastname":"Doe","email":"user@example.com","image":"https://example.com/profile.jpg","role":"student","type":"undergraduate","confirmed":true,"education":{"major":"Computer Science","enrollmentYear":"2023","studentId":"STU001","schoolId":"64a1b2c3d4e5f6789012346"},"job":[],"createdAt":"2023-07-01T00:00:00.000Z","updatedAt":"2023-07-01T00:00:00.000Z","token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}}}}},"401":{"description":"Invalid credentials","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"error":"Invalid password"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"error":"User not found"}}}},"500":{"$ref":"#/components/responses/InternalServerError"}}}},"/profile":{"get":{"tags":["Profile"],"summary":"Get user profile","description":"Retrieve the profile information of the authenticated user","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"responses":{"200":{"description":"Profile retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileResponse"},"example":{"data":{"_id":"string","firstname":"string","lastname":"string","email":"string","image":"string","role":"string","type":"string","confirmed":true,"education":{"major":"string","enrollmentYear":"string","studentId":"string","schoolId":"string","school":{"_id":"string","name":"string","province":"string","logo":"string"},"advisorId":"string","advisor":{"_id":"string","name":"string","email":"string","image":"string"},"image":"string"},"job":[],"createdAt":"string","updatedAt":"string"}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}}},"patch":{"tags":["Profile"],"summary":"Update user profile","description":"Update the profile information of the authenticated user. Supports updating firstname, lastname, and studentId. The enrollmentYear will be automatically calculated from studentId if it's 10-11 characters long.","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileUpdateRequest"},"example":{"firstname":"string","lastname":"string","studentId":"string","schoolId":"string","advisorId":"string"}}}},"responses":{"200":{"description":"Profile updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileResponse"},"example":{"data":{"_id":"string","firstname":"string","lastname":"string","email":"string","image":"string","role":"string","type":"string","confirmed":true,"education":{"major":"string","enrollmentYear":"string","studentId":"string","schoolId":"string","school":{"_id":"string","name":"string","province":"string","logo":"string"},"advisorId":"string","advisor":{"_id":"string","name":"string","email":"string","image":"string"},"image":"string"},"job":[],"createdAt":"string","updatedAt":"string"}}}}},"400":{"description":"Bad request - Invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"error":"Invalid student ID format"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"error":"User not found"}}}},"500":{"$ref":"#/components/responses/InternalServerError"}}}},"/company":{"get":{"tags":["Company"],"summary":"Get all companies","description":"Retrieve a list of all companies","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"responses":{"200":{"description":"Companies retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyListResponse"},"example":{"data":[{"_id":"64a1b2c3d4e5f6789012347","name":"Tech Corp","province":"Bangkok","logo":"https://example.com/uploads/company-logos/company_1234567890.jpg","createdAt":"2023-07-01T00:00:00.000Z","updatedAt":"2023-07-01T00:00:00.000Z"}]}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}}}},"/company/{id}":{"get":{"tags":["Company"],"summary":"Get company by ID","description":"Retrieve a specific company by its ID","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"description":"Company ID","schema":{"type":"string","pattern":"^[0-9a-fA-F]{24}$"},"example":"string"}],"responses":{"200":{"description":"Company retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyResponse"},"example":{"data":{"_id":"string","name":"string","province":"string","logo":"string","createdAt":"string","updatedAt":"string"}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"Company not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"error":"Company not found"}}}},"500":{"$ref":"#/components/responses/InternalServerError"}}}},"/school":{"get":{"tags":["School"],"summary":"Get all schools","description":"Retrieve a list of all schools","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"responses":{"200":{"description":"Schools retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SchoolListResponse"},"example":{"data":[{"_id":"64a1b2c3d4e5f6789012348","name":"Chulalongkorn University","province":"Bangkok","logo":"https://example.com/uploads/school-logos/school_1234567890.jpg","createdAt":"2023-07-01T00:00:00.000Z","updatedAt":"2023-07-01T00:00:00.000Z"}]}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}}}},"/school/{id}":{"get":{"tags":["School"],"summary":"Get school by ID","description":"Retrieve a specific school by its ID","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"description":"School ID","schema":{"type":"string","pattern":"^[0-9a-fA-F]{24}$"},"example":"string"}],"responses":{"200":{"description":"School retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SchoolResponse"},"example":{"data":{"_id":"string","name":"string","province":"string","logo":"string","createdAt":"string","updatedAt":"string"}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"School not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"error":"School not found"}}}},"500":{"$ref":"#/components/responses/InternalServerError"}}}},"/teacher":{"get":{"tags":["Teacher"],"summary":"Get all teachers","description":"Retrieve a list of all teachers","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"responses":{"200":{"description":"Teachers retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeacherListResponse"},"example":{"data":[{"_id":"64a1b2c3d4e5f6789012349","no":1,"name":"Dr. Jane Smith","email":"jane.smith@university.edu","image":"https://example.com/uploads/teachers/teacher_1234567890.jpg","createdAt":"2023-07-01T00:00:00.000Z","updatedAt":"2023-07-01T00:00:00.000Z"}]}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}}}},"/class/{id}":{"get":{"tags":["Class"],"summary":"Get users by enrollment year","description":"Retrieve all users who have the specified enrollment year (class year)","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"description":"Enrollment year (class year)","schema":{"type":"string","pattern":"^[0-9]{4}$"},"example":"2023"}],"responses":{"200":{"description":"Users retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClassResponse"},"example":{"data":[{"_id":"64a1b2c3d4e5f6789012345","firstname":"John","lastname":"Doe","email":"john.doe@example.com","image":"https://example.com/profile.jpg","role":"student","type":"undergraduate","confirmed":true,"education":{"major":"Computer Science","enrollmentYear":"2023","studentId":"STU001","schoolId":"64a1b2c3d4e5f6789012346","school":{"_id":"64a1b2c3d4e5f6789012346","name":"Chulalongkorn University","province":"Bangkok","logo":"https://example.com/school-logo.jpg"},"advisorId":"64a1b2c3d4e5f6789012349","advisor":{"_id":"64a1b2c3d4e5f6789012349","name":"Dr. Jane Smith","email":"jane.smith@university.edu","image":"https://example.com/teacher.jpg"}},"job":[],"createdAt":"2023-07-01T00:00:00.000Z","updatedAt":"2023-07-01T00:00:00.000Z"}]}}}},"400":{"description":"Bad request - Class ID is required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"error":"Class ID is required"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"No users found for the specified enrollment year","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"error":"User not found"}}}},"500":{"$ref":"#/components/responses/InternalServerError"}}}},"/status":{"get":{"tags":["Status"],"summary":"Get all status posts","description":"Retrieve all status posts with like count and user like status","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"responses":{"200":{"description":"Status posts retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusListResponse"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}}},"post":{"tags":["Status"],"summary":"Create a new status post","description":"Create a new status post with content","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusCreateRequest"}}}},"responses":{"200":{"description":"Status post created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusResponse"}}}},"400":{"description":"Bad request - Invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}}}},"/status/{id}":{"get":{"tags":["Status"],"summary":"Get status post by ID","description":"Retrieve a specific status post by its ID","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"description":"Status ID","schema":{"type":"string","pattern":"^[0-9a-fA-F]{24}$"},"example":"64a1b2c3d4e5f6789012345"}],"responses":{"200":{"description":"Status post retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusResponse"}}}},"400":{"description":"Bad request - Status ID is required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"Status post not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"$ref":"#/components/responses/InternalServerError"}}},"delete":{"tags":["Status"],"summary":"Delete status post","description":"Delete a status post. Only the owner can delete their own posts.","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"description":"Status ID","schema":{"type":"string","pattern":"^[0-9a-fA-F]{24}$"},"example":"64a1b2c3d4e5f6789012345"}],"responses":{"200":{"description":"Status post deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"string","description":"Deleted status ID"}}}}}},"400":{"description":"Bad request - Status ID is required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden - Not the owner of the status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Status post not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"$ref":"#/components/responses/InternalServerError"}}}},"/like":{"post":{"tags":["Like"],"summary":"Like a status post","description":"Add a like to a status post. If already liked, returns success message.","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LikeRequest"}}}},"responses":{"200":{"description":"Status liked successfully or already liked","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/StatusResponse"},{"type":"object","properties":{"details":{"type":"string","example":"User has already liked this status"}}}]}}}},"400":{"description":"Bad request - Invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"Status post not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"delete":{"tags":["Like"],"summary":"Unlike a status post","description":"Remove a like from a status post","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LikeRequest"}}}},"responses":{"200":{"description":"Status unliked successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusResponse"}}}},"400":{"description":"Bad request - User has not liked this status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"Status post not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/comment":{"post":{"tags":["Comment"],"summary":"Add a comment to a status post","description":"Add a new comment to an existing status post","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentCreateRequest"},"example":{"content":"Great post!","statusId":"64a1b2c3d4e5f6789012345"}}}},"responses":{"200":{"description":"Comment added successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusResponse"}}}},"400":{"description":"Bad request - Invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"error":"Content is required"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"Status post not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"error":"Status not found"}}}},"500":{"$ref":"#/components/responses/InternalServerError"}}}},"/comment/{id}":{"delete":{"tags":["Comment"],"summary":"Delete a comment","description":"Delete a comment from a status post. Only the comment author can delete their own comments.","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"description":"Comment ID","schema":{"type":"string","pattern":"^[0-9a-fA-F]{24}$"},"example":"64a1b2c3d4e5f6789012345"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentDeleteRequest"},"example":{"statusId":"64a1b2c3d4e5f6789012345"}}}},"responses":{"200":{"description":"Comment deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/Status"},"message":{"type":"string","example":"Comment deleted successfully"}}}}}},"400":{"description":"Bad request - Invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"error":"Status ID is required"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden - Not the author of the comment","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"error":"Unauthorized: You can only delete your own comments"}}}},"404":{"description":"Comment or status not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"error":"Comment not found"}}}},"500":{"$ref":"#/components/responses/InternalServerError"}}}},"/unlike":{"delete":{"tags":["Like"],"summary":"Unlike a status post","description":"Remove a like from a status post","security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LikeRequest"}}}},"responses":{"200":{"description":"Status unliked successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusResponse"}}}},"400":{"description":"Bad request - User has not liked this status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"Status post not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}}},"components":{"securitySchemes":{"ApiKeyAuth":{"type":"apiKey","in":"header","name":"x-api-key","description":"API key for authentication. Get your API key from the admin panel."},"BearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"JWT token for authentication. Get your token from the /signin endpoint."}},"schemas":{"User":{"type":"object","properties":{"_id":{"type":"string","description":"User ID","example":"string"},"firstname":{"type":"string","description":"User's first name","example":"string"},"lastname":{"type":"string","description":"User's last name","example":"string"},"email":{"type":"string","format":"email","description":"User's email address","example":"string"},"image":{"type":"string","format":"uri","description":"User's profile image URL","example":"string"},"role":{"type":"string","enum":["admin","teacher","student"],"description":"User's role","example":"string"},"type":{"type":"string","enum":["undergraduate","graduate","teacher","admin"],"description":"User's type","example":"string"},"confirmed":{"type":"boolean","description":"Whether the user's email is confirmed","example":true},"education":{"$ref":"#/components/schemas/Education"},"job":{"type":"array","items":{"$ref":"#/components/schemas/Job"},"description":"User's job history"},"createdAt":{"type":"string","format":"date-time","description":"User creation timestamp"},"updatedAt":{"type":"string","format":"date-time","description":"User last update timestamp"}},"required":["firstname","lastname","email","role","type"]},"Education":{"type":"object","properties":{"major":{"type":"string","description":"Student's major field of study","example":"string"},"enrollmentYear":{"type":"string","description":"Year of enrollment","example":"string"},"studentId":{"type":"string","description":"Student ID","example":"string"},"schoolId":{"type":"string","description":"School ID","example":"string"}}},"Job":{"type":"object","properties":{"companyId":{"type":"string","description":"Company ID","example":"string"},"position":{"type":"string","description":"Job position","example":"string"},"startDate":{"type":"string","format":"date","description":"Job start date","example":"string"},"endDate":{"type":"string","format":"date","description":"Job end date","example":"string"}}},"Company":{"type":"object","properties":{"_id":{"type":"string","description":"Company ID","example":"string"},"name":{"type":"string","description":"Company name","example":"string"},"province":{"type":"string","description":"Province where the company is located","example":"string"},"logo":{"type":"string","format":"uri","description":"Company logo URL","example":"string"},"createdAt":{"type":"string","format":"date-time","description":"Company creation timestamp"},"updatedAt":{"type":"string","format":"date-time","description":"Company last update timestamp"}},"required":["name","province"]},"School":{"type":"object","properties":{"_id":{"type":"string","description":"School ID","example":"string"},"name":{"type":"string","description":"School name","example":"string"},"province":{"type":"string","description":"Province where the school is located","example":"string"},"logo":{"type":"string","format":"uri","description":"School logo URL","example":"string"},"createdAt":{"type":"string","format":"date-time","description":"School creation timestamp"},"updatedAt":{"type":"string","format":"date-time","description":"School last update timestamp"}},"required":["name","province"]},"ProfileUpdateRequest":{"type":"object","properties":{"firstname":{"type":"string","description":"User's first name","example":"string","minLength":1},"lastname":{"type":"string","description":"User's last name","example":"string","minLength":1},"studentId":{"type":"string","description":"Student ID (10-11 characters). If provided, enrollmentYear will be automatically calculated from the first 2 digits.","example":"string","pattern":"^.{10,11}$"}},"additionalProperties":false},"ProfileResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/User"}}},"CompanyListResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Company"}}}},"CompanyResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/Company"}}},"SchoolListResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/School"}}}},"SchoolResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/School"}}},"ErrorResponse":{"type":"object","properties":{"error":{"type":"string","description":"Error message","example":"Invalid API key"}},"required":["error"]},"SignInRequest":{"type":"object","properties":{"email":{"type":"string","format":"email","description":"User's email address","example":"user@example.com"},"password":{"type":"string","description":"User's password","example":"password123","minLength":6}},"required":["email","password"]},"SignInResponse":{"type":"object","properties":{"data":{"allOf":[{"$ref":"#/components/schemas/User"},{"type":"object","properties":{"token":{"type":"string","description":"JWT token for authentication","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}},"required":["token"]}]}}},"Teacher":{"type":"object","properties":{"_id":{"type":"string","description":"Teacher ID","example":"string"},"no":{"type":"number","description":"Teacher number","example":1},"name":{"type":"string","description":"Teacher's full name","example":"string"},"email":{"type":"string","format":"email","description":"Teacher's email address","example":"string"},"image":{"type":"string","format":"uri","description":"Teacher's profile image URL","example":"string"},"createdAt":{"type":"string","format":"date-time","description":"Teacher creation timestamp"},"updatedAt":{"type":"string","format":"date-time","description":"Teacher last update timestamp"}},"required":["no","name","email"]},"TeacherListResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Teacher"}}}},"Status":{"type":"object","properties":{"_id":{"type":"string","description":"Status ID","example":"string"},"content":{"type":"string","description":"Status content","example":"string"},"createdBy":{"oneOf":[{"type":"string","description":"User ID when creating status"},{"type":"object","properties":{"_id":{"type":"string","example":"string"},"name":{"type":"string","example":"string"},"email":{"type":"string","format":"email","example":"string"},"image":{"type":"string","format":"uri","example":"string"}}}]},"like":{"type":"array","items":{"oneOf":[{"type":"string","description":"User ID"},{"type":"object","properties":{"_id":{"type":"string","example":"string"},"name":{"type":"string","example":"string"},"email":{"type":"string","format":"email","example":"string"},"image":{"type":"string","format":"uri","example":"string"}}}]},"description":"Array of users who liked this status"},"likeCount":{"type":"number","description":"Number of likes (computed field)","example":5},"hasLiked":{"type":"boolean","description":"Whether the current user has liked this status (computed field)","example":false},"comment":{"type":"array","items":{"$ref":"#/components/schemas/Comment"},"description":"Array of comments on this status"},"createdAt":{"type":"string","format":"date-time","description":"Status creation timestamp"},"updatedAt":{"type":"string","format":"date-time","description":"Status last update timestamp"}},"required":["content","createdBy"]},"Comment":{"type":"object","properties":{"_id":{"type":"string","description":"Comment ID","example":"64a1b2c3d4e5f6789012345"},"content":{"type":"string","description":"Comment content","example":"Great post!"},"createdBy":{"oneOf":[{"type":"string","description":"User ID when creating comment"},{"type":"object","properties":{"_id":{"type":"string","example":"64a1b2c3d4e5f6789012345"},"name":{"type":"string","example":"John Doe"},"email":{"type":"string","format":"email","example":"john@example.com"},"image":{"type":"string","format":"uri","example":"https://example.com/profile.jpg"}}}]},"like":{"type":"array","items":{"type":"string"},"description":"Array of user IDs who liked this comment"},"createdAt":{"type":"string","format":"date-time","description":"Comment creation timestamp"}},"required":["content","createdBy"]},"StatusCreateRequest":{"type":"object","properties":{"content":{"type":"string","description":"Status content","example":"Hello everyone! This is my first post.","minLength":1}},"required":["content"],"additionalProperties":false},"StatusResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/Status"}}},"StatusListResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Status"}}}},"LikeRequest":{"type":"object","properties":{"statusId":{"type":"string","description":"Status ID to like/unlike","example":"string","pattern":"^[0-9a-fA-F]{24}$"}},"required":["statusId"],"additionalProperties":false},"ClassResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/User"},"description":"Array of users with the specified enrollment year"}}},"CommentCreateRequest":{"type":"object","properties":{"content":{"type":"string","description":"Comment content","example":"Great post!","minLength":1},"statusId":{"type":"string","description":"Status ID to comment on","example":"64a1b2c3d4e5f6789012345","pattern":"^[0-9a-fA-F]{24}$"}},"required":["content","statusId"],"additionalProperties":false},"CommentDeleteRequest":{"type":"object","properties":{"statusId":{"type":"string","description":"Status ID containing the comment","example":"64a1b2c3d4e5f6789012345","pattern":"^[0-9a-fA-F]{24}$"}},"required":["statusId"],"additionalProperties":false}},"responses":{"UnauthorizedError":{"description":"Authentication information is missing or invalid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"examples":{"missingApiKey":{"summary":"Missing API key","value":{"error":"API key is required in x-api-key header"}},"invalidApiKey":{"summary":"Invalid API key","value":{"error":"Invalid or inactive API key"}},"missingToken":{"summary":"Missing JWT token","value":{"error":"Authorization token is required"}},"invalidToken":{"summary":"Invalid JWT token","value":{"error":"Invalid token"}},"expiredToken":{"summary":"Expired JWT token","value":{"error":"Token has expired"}}}}}},"InternalServerError":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"error":"Internal server error"}}}}}},"tags":[{"name":"Authentication","description":"User authentication and JWT token management"},{"name":"Profile","description":"User profile management"},{"name":"Company","description":"Company data management"},{"name":"School","description":"School data management"},{"name":"Teacher","description":"Teacher data management"},{"name":"Class","description":"Class management by enrollment year"},{"name":"Status","description":"Status posts management and social features"},{"name":"Like","description":"Like and unlike functionality for status posts"},{"name":"Comment","description":"Comment management for status posts"}]};

      const ui = SwaggerUIBundle({
        spec: spec,
        dom_id: '#swagger-ui',
        deepLinking: true,
        presets: [
          SwaggerUIBundle.presets.apis,
          SwaggerUIStandalonePreset
        ],
        plugins: [
          SwaggerUIBundle.plugins.DownloadUrl
        ],
        layout: "StandaloneLayout",
        tryItOutEnabled: true,
        requestInterceptor: function(request) {
          // Add API key to all requests if available
          const apiKey = localStorage.getItem('apiKey');
          if (apiKey) {
            request.headers['x-api-key'] = apiKey;
          }
          return request;
        }
      });
      
      window.setApiKey = function() {
        const apiKey = document.getElementById('apiKeyInput').value;
        if (apiKey) {
          localStorage.setItem('apiKey', apiKey);
          alert('API key set successfully! It will be included in all requests.');
        } else {
          alert('Please enter a valid API key.');
        }
      };
      
      window.clearApiKey = function() {
        localStorage.removeItem('apiKey');
        document.getElementById('apiKeyInput').value = '';
        alert('API key cleared.');
      };
    };
  </script>
</body>
</html>
  
