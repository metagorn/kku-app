# KKU App – Classroom Portal (Expo)

แอป KKU CIS ด้วย Expo/React Native มีฟีเจอร์พื้นฐานเช่น ลงชื่อเข้าใช้, ฟีดสถานะ, กดถูกใจ/ยกเลิกถูกใจ, คอมเมนต์ และดูรายชื่อสมาชิกตามปีการศึกษา

ผู้จัดทำ: นายเมธากร สิงห์คาน  653450100-9

**หมายเหตุ**: โค้ดถูกออกแบบให้รับรูปแบบข้อมูลที่ยืดหยุ่นจาก API (field ชื่อ/โครงสร้างอาจต่างกันได้) และพยายามคงชื่อผู้คอมเมนต์ไม่ให้เปลี่ยนเป็น “ผู้ใช้” เมื่อมีการกดถูกใจแล้วรีเฟรชข้อมูล

**คุณสมบัติหลัก**
- ลงชื่อเข้าใช้ด้วยอีเมล/รหัสผ่าน และบันทึกโทเคนด้วย `expo-secure-store` (หรือ LocalStorage บนเว็บ)
- ฟีดสถานะ: สร้างโพสต์, กดถูกใจ/ยกเลิก, นับจำนวนถูกใจ, คอมเมนต์/ลบคอมเมนต์
- สมาชิก: ค้นหารายชื่อสมาชิกตามปีที่เข้าศึกษา
- รองรับเว็บผ่าน `expo start --web`

**โครงสร้างโปรเจกต์ (ย่อ)**
- `App.tsx` — หน้าหลัก (Sign in, Feed, Members) และ UI หลักของแอป
- `index.ts` — จุดเริ่มต้นของแอปสำหรับ Expo
- `src/api/client.ts` — ฟังก์ชันเรียก API และตัวช่วยแปลงข้อมูล (normalize)
- `assets/` — ไอคอน/รูปภาพสำหรับแอป
- `.env.example` — ตัวอย่างตัวแปรแวดล้อมที่ต้องตั้งค่า

**ข้อกำหนดระบบ**
- Node.js และ npm (หรือ pnpm/yarn)
- Expo CLI (รันผ่านสคริปต์ใน `package.json` ก็ได้ ไม่ต้องติดตั้ง global)

**ตั้งค่า Environment**
1) คัดลอกไฟล์ตัวอย่างเป็น `.env`
```
cp .env.example .env
```
2) แก้ค่าตัวแปรตามสภาพแวดล้อมของคุณ
- `EXPO_PUBLIC_API_BASE_URL` ค่าเริ่มต้นชี้ไปที่ `https://cis.kku.ac.th/api/classroom`
- (เลือกใส่) `EXPO_PUBLIC_API_KEY` หากเซิร์ฟเวอร์ต้องการหัวข้อ `x-api-key`

**เริ่มต้นใช้งาน**
1) ติดตั้งแพ็กเกจ
```
npm install
```
2) รันแอป (เลือกแพลตฟอร์มได้ตามต้องการ)
```
npm run start       # เปิด Dev Tools ของ Expo
npm run web         # รันบนเว็บ
npm run android     # เปิดบน Android (ต้องมีอีมูเลเตอร์/ดีไวซ์)
npm run ios         # เปิดบน iOS (macOS + Xcode)
```

เมื่อเปิดแอปครั้งแรก ให้ลงชื่อเข้าใช้ด้วยบัญชีที่ระบบอนุญาต แอปจะเก็บโทเคนไว้เพื่อเรียก API ต่อไป

**การตั้งค่า/แก้ไข API**
- จุดตั้งค่าพื้นฐานอยู่ที่ `src/api/client.ts` และไฟล์ `.env`
- หากโครงสร้างผลลัพธ์จาก API แตกต่าง สามารถปรับฟังก์ชัน `normalizeStatus/normalizeComments` ให้เข้ากับสกีมาของคุณได้

**ทราบปัญหา/ข้อควรระวัง**
- หากฝั่งเซิร์ฟเวอร์ส่งข้อมูลผู้เขียนหรือผู้คอมเมนต์เป็นเพียงไอดี (ไม่ใช่อ็อบเจ็กต์ user) UI มีตัวช่วยรวมข้อมูลเพื่อไม่ให้ชื่อหาย แต่แนะนำให้ API ส่งข้อมูลผู้ใช้ที่จำเป็นอย่างสม่ำเสมอ

**สคริปต์ที่ใช้บ่อย**
- `npm run start` — เปิด Dev Server ของ Expo
- `npm run web` — รันบนเว็บ
- `npm run android` / `npm run ios` — เปิดบนอีมูเลเตอร์/ดีไวซ์

**ไลเซนส์**
ใช้เพื่อการศึกษา/ต้นแบบ ไม่ได้กำหนดไลเซนส์เพิ่มเติม

